<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Hotel Generator</title>
    <link rel="stylesheet" href="style.css">
    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.170.0/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.170.0/examples/jsm/"
        }
    }
    </script>
</head>
<body>
    <div class="app">
        <!-- Top bar -->
        <header class="top-bar">
            <h1>3D Hotel Generator</h1>
            <div class="top-bar-actions">
                <button id="btn-reset-view" title="Reset camera view">Reset View</button>
                <button id="btn-download" title="Download STL file">Download STL</button>
            </div>
        </header>

        <!-- Workspace -->
        <div class="workspace">
            <!-- 3D Viewport -->
            <div class="viewport" id="viewport">
                <div class="loading-overlay" id="loading-overlay">
                    <div class="spinner"></div>
                    <p>Generating...</p>
                </div>
                <div class="error-toast" id="error-toast"></div>
            </div>

            <!-- Sidebar -->
            <aside class="sidebar" id="sidebar">
                <!-- Mode tabs -->
                <div class="mode-tabs">
                    <button class="mode-tab active" data-mode="single">Single Building</button>
                    <button class="mode-tab" data-mode="complex">Hotel Complex</button>
                    <button class="mode-tab" data-mode="board">Game Board</button>
                </div>

                <!-- Complex-only: Preset selector -->
                <div class="sidebar-section complex-only" id="preset-section" style="display:none">
                    <label for="preset-select">Hotel Preset</label>
                    <select id="preset-select">
                        <option value="">Custom (no preset)</option>
                    </select>
                </div>

                <!-- Board-only: Road shape -->
                <div class="sidebar-section board-only" id="road-shape-section" style="display:none">
                    <label for="road-shape-select">Road Layout</label>
                    <select id="road-shape-select">
                        <option value="loop">Loop (Boulevard)</option>
                        <option value="serpentine">Serpentine</option>
                        <option value="linear">Linear</option>
                    </select>
                </div>

                <div class="sidebar-section">
                    <label for="style-select">Architectural Style</label>
                    <select id="style-select"></select>
                </div>

                <div class="sidebar-section">
                    <label for="printer-select">Printer Type</label>
                    <select id="printer-select">
                        <option value="fdm">FDM (Filament)</option>
                        <option value="resin">Resin (SLA/DLP)</option>
                    </select>
                </div>

                <div class="sidebar-section">
                    <label>Seed</label>
                    <div class="slider-row">
                        <input type="range" id="seed-slider" min="1" max="999" value="42">
                        <span class="slider-value" id="seed-value">42</span>
                    </div>
                </div>

                <!-- Complex-only: Building count and spacing -->
                <div class="sidebar-section complex-only" id="buildings-section" style="display:none">
                    <label>Buildings</label>
                    <div class="slider-row">
                        <input type="range" id="buildings-slider" min="1" max="6" value="3">
                        <span class="slider-value" id="buildings-value">3</span>
                    </div>
                </div>

                <div class="sidebar-section complex-only" id="spacing-section" style="display:none">
                    <label>Spacing (mm)</label>
                    <div class="slider-row">
                        <input type="range" id="spacing-slider" min="2" max="15" step="0.5" value="5">
                        <span class="slider-value" id="spacing-value">5.0</span>
                    </div>
                </div>

                <div class="sidebar-section">
                    <label>Width (mm)</label>
                    <div class="slider-row">
                        <input type="range" id="width-slider" min="10" max="50" step="1" value="30">
                        <span class="slider-value" id="width-value">30</span>
                    </div>
                </div>

                <div class="sidebar-section">
                    <label>Depth (mm)</label>
                    <div class="slider-row">
                        <input type="range" id="depth-slider" min="10" max="40" step="1" value="25">
                        <span class="slider-value" id="depth-value">25</span>
                    </div>
                </div>

                <div class="sidebar-section">
                    <label>Floors</label>
                    <div class="slider-row">
                        <input type="range" id="floors-slider" min="2" max="12" value="4">
                        <span class="slider-value" id="floors-value">4</span>
                    </div>
                </div>

                <div class="sidebar-section">
                    <label>Floor Height (mm)</label>
                    <div class="slider-row">
                        <input type="range" id="floor-height-slider" min="2" max="8" step="0.5" value="5">
                        <span class="slider-value" id="floor-height-value">5.0</span>
                    </div>
                </div>

                <!-- Dynamic style-specific params -->
                <div id="style-params-container"></div>

                <!-- Build info -->
                <div class="sidebar-section build-info" id="build-info" style="display:none">
                    <label>Build Info</label>
                    <p id="info-triangles"></p>
                    <p id="info-size"></p>
                    <p id="info-buildings" style="display:none"></p>
                </div>
            </aside>
        </div>
    </div>

    <script type="module" src="app.js"></script>
</body>
</html>
